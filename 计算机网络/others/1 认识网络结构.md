> 多台机器之间的通信，如下图所示

## 1 OSI标准七层和TCP/Ip模型

TCP/IP

OSI

两者不同

TCP/IP纯软件层面的协议栈，没有网卡等屋里设备。OSI在理论上更加完整。另外OSI带编号，最上面为第七层，最下面为第一层 	

两者如何映射(05)

画图  	

## 2 分层(趣谈02)

通过同一套网络协议栈分成多个层次并组合的方式满足不同服务器和设备的通信需求

有时候我们在家内部通讯，有时候需要和远在其他省份的家人沟通，也就是说家里有网络，运营商有网络，那么怎么区分。网络号。IP地址类似互联网上的邮寄地址，具有全局定位功能。即使你访问吉尔杰斯斯坦，通过一个网络一个网络的沟通，也能进行通信，这里就使用了第三层中的路由协议。

第二层种的数据链路层主要就是mac了，每个网卡都有的唯一硬件地址。通过ARP将ip地址得到MAC地址，通过在本地发送广播包的方式获得mac地址。缺点就是作用范围只能在本地网络，一旦跨网络通信，ip地址保持不变，但是mac没经过一次路由器会更换一次。

第四层，传输层，由于ip层没有对丢包，重传机制，全部给tcp来干，也是压力山大。

再上就是网络层次了，我们经常使用的http，Nginx都是用户态，二层到四层内容交给了Linux内核。

那么应用层要和内核通信，这里就出现了socket





## 3 一个数据包的发送过程（性能优化）

封装为http-----通过socket发送到内核--网络协议栈准备好连接维护，重传等机制----加上tcp头---加上ip头---mac头--从硬件网卡发送出去

到达交换机-(拿下mac，发现就在旁边的网口)----mac地址匹配----ip层，路由匹配(查看从哪里跳出去)---到达网络2的交换机----Linux服务器B---mac匹配--ip匹配---

## 4 IP地址

> ip通讯地址，就像我们的门牌号，不能大家都一样，不然外卖小哥都找不到了。

使用ipconfig看看

10.100.122.2 .分割，每部分8bit，所以ip地址为32位。那一共多少个，ipv6多少。IP地址一共分为5类，如下图所示



无类型域间选路

> 10.100.125.2/24。将32位IP地址一分为二，前面是网络号，后面是主机号，后面24代表前面24是网络号，后面8位是主机号。

公有地址和私有地址

> 私有地址就是我们在学校实验室配的ip地址，通常为192或者10开头。公有地址是组织分配，需要我们花钱买，比如我们自己做的网站，需要各个省份都能看到，这个时候就需要买了。

笔试中常见的CIDR题目



## 5 MAC地址

> MAC地址就像我们的身份证，唯一标识。那是不是我们就可以直接MAC地址通信了，不能，MAC地址只能在局域网通信，出了局域网，需要IP地址的帮助了。



